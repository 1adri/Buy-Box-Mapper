<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="popup.css">
</head>
<body class="ui-standard">
  <header>
    <h1>ğŸ›’ Buy Box Mapper</h1>
    <p class="subtitle">Track Buy Box winners by ZIP code across your ASIN catalog.</p>
  </header>

  <section class="panel">
    <div class="ui-mode-toggle" role="tablist" aria-label="Interface mode">
      <button class="btn-ui-mode active" id="btnStandardMode" type="button">Standard</button>
      <button class="btn-ui-mode" id="btnAdvancedMode" type="button">Advanced</button>
    </div>

    <label for="sellerName">Seller Display Name</label>
    <input id="sellerName" placeholder="e.g. MyStoreName" />

    <label for="asins">ASINs (one per line)</label>
    <textarea id="asins" placeholder="B08N5WRWNW&#10;B09V3KXJPB"></textarea>
    <button class="btn-asin-fill" id="btnUseCurrentAsin" type="button">ğŸ” Use ASIN from Current Amazon Tab</button>

    <div class="field-head">
      <label for="zips">ZIP Codes (one per line)</label>
      <span class="field-help">Use presets below for faster setup.</span>
    </div>
    <textarea id="zips" placeholder="10001&#10;90210&#10;60601"></textarea>

    <div class="preset-row">
      <select id="zipPreset">
        <option value="">Load ZIP presetâ€¦</option>
      </select>
      <button class="btn-secondary" id="btnPresetReplace" type="button">Replace</button>
      <button class="btn-secondary advanced-only" id="btnPresetAppend" type="button">Append</button>
    </div>

    <div class="custom-preset-row advanced-only">
      <input id="presetName" placeholder="Custom preset name" />
      <button class="btn-secondary" id="btnPresetSave" type="button">Save as Custom</button>
      <button class="btn-secondary" id="btnPresetDelete" type="button">Delete Selected</button>
    </div>

    <label for="delay">Delay between checks (seconds, min 10)</label>
    <input id="delay" type="number" value="25" min="10" />

    <div class="advanced-only">
      <label for="maxRetries">Retry failed checks (per ASIN/ZIP)</label>
      <input id="maxRetries" type="number" value="1" min="0" max="5" />
    </div>

    <div class="advanced-only">
      <label for="captchaStreakLimit">Auto-stop on CAPTCHA streak</label>
      <input id="captchaStreakLimit" type="number" value="3" min="1" max="20" />
    </div>

    <div class="advanced-only">
      <label for="captchaCooldownSec">CAPTCHA cooldown before stop (seconds)</label>
      <input id="captchaCooldownSec" type="number" value="60" min="0" max="1800" />
    </div>

    <div class="estimate-card" id="estimateCard" aria-live="polite">
      <div><strong>Estimated runtime</strong></div>
      <div id="runtimeEstimate">Enter ASINs + ZIPs to estimate.</div>
    </div>

    <div class="advanced-only">
      <label for="mode">Start Mode</label>
      <select id="mode">
        <option value="zip_then_asin">Each ZIP, then all ASINs</option>
        <option value="asin_then_zip">Each ASIN, then all ZIPs</option>
      </select>
      <div class="mode-hint" id="modeHint">Sets one ZIP, checks all ASINs there, then moves to the next ZIP. Fewer ZIP changes = faster.</div>
    </div>
  </section>

  <div class="row">
    <button class="btn-start" id="btnStart">â–¶ Start</button>
    <button class="btn-stop" id="btnStop">â¹ Stop</button>
  </div>
  <div class="row">
    <button class="btn-export" id="btnExport">ğŸ“¥ Export CSV</button>
    <button class="btn-clear" id="btnClear">ğŸ—‘ Clear</button>
    <button class="btn-runner advanced-only" id="btnRunner">ğŸ–¥ Runner</button>
  </div>

  <div id="status">Ready.</div>

  <script src="popup.js"></script>
</body>
</html>
